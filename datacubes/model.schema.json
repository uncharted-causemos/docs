{
   "$id": "http://worldmodelers.com/model-metadata.json",
   "$schema": "http://json-schema.org/draft-07/schema",
   "description": "World Modelers Model Metadata Schema",
   "required": [
      "id",
      "name",
      "description",
      "maintainer",
      "category",
      "image",
      "type",
      "parameters",
      "outputs"
   ],
   "title": "Model Metadata Schema",
   "type": "object",
   "properties": {
      "id": {
         "$id": "#/properties/id",
         "default": "",
         "description": "A unique model id",
         "examples": [
            "123e4567-e89b-12d3-a456-426614174000"
         ],
         "title": "Model ID",
         "type": "string"
      },
      "name": {
         "$id": "#/properties/name",
         "default": "",
         "description": "The model name",
         "examples": [
            "DSSAT"
         ],
         "title": "Model Name",
         "type": "string"
      },
      "description": {
         "$id": "#/properties/description",
         "default": "",
         "description": "The description of the model.",
         "examples": [
            "The Decision Support System for Agrotechnology Transfer (DSSAT) comprises dynamic crop growth simulation model for over 40 crops. The model simulates growth development; and yield as a function of the soil-plant-atmosphere dynamics."
         ],
         "title": "Model Description",
         "type": "string"
      },
      "created": {
         "$id": "#/properties/created",
         "default": "",
         "description": "When the model was registered",
         "examples": [
            "1970-01-01T00:00:00Z"
         ],
         "title": "Model Registration Time",
         "type": "string"
      },
      "version": {
         "$id": "#/properties/version",
         "default": "",
         "description": "Version of model used",
         "examples": [
            "1.2"
         ],
         "title": "Model Version",
         "type": "string"
      },
      "status": {
         "$id": "#/properties/status",
         "default": "",
         "description": "Current status of the model",
         "title": "Model Status",
         "enum": [
            "current",
            "faulty",
            "not-runnable-current",
            "runnable-deprecated",
            "not-runnable-deprecated"
         ]
      },
      "category": {
         "$id": "#/properties/category",
         "type": "array",
         "title": "Categories",
         "description": "List of categories",
         "examples": [
            [
               "Economic",
               "Agricultural"
            ]
         ],
         "items": {
            "$id": "#/definitions/parameter/tags/items",
            "type": "string"
         }
      },
      "maintainer": {
         "$id": "#/properties/maintainer",
         "description": "Information about the model maintainer.",
         "title": "Model Maintainer",
         "$ref": "#/definitions/maintainer",
         "additionalProperties": true
      },
      "image": {
         "$id": "#/properties/image",
         "type": "string",
         "title": "Container Image",
         "description": "The name and tag of the model container image (on Dockerhub, etc.)",
         "default": "",
         "examples": [
            "DSSAT:latest"
         ]
      },
      "type": {
         "$id": "#/properties/type",
         "default": "model",
         "description": "Does this represent a bottom-up model or an indicator",
         "title": "Model Type",
         "enum": [
            "model",
            "indicator"
         ]
      },
      "model_dependencies": {
         "$id": "#/properties/model_dependencies",
         "type": "array",
         "title": "Model Dependencies",
         "description": "A list of Model IDs that are required in order to run this model",
         "items": {
            "$ref": "#/properties/id"
         }
      },
      "observed_data": {
         "$id": "#/properties/observed_data",
         "type": "array",
         "title": "Observed Data",
         "description": "A list of Cube IDs that represent observed data for this model",
         "items": {
            "$ref": "http://worldmodelers.com/cube-metadata.json#/properties/id"
         }
      },
      "stochastic": {
         "$id": "#/properties/stochastic",
         "type": "boolean",
         "title": "Stochastic?",
         "description": "Is the model stochastic",
         "default": "false"
      },
      "cube_count": {
         "$id": "#/properties/stochastic",
         "type": "integer",
         "title": "Cube Count",
         "description": "How many data cubes each job of the model produces",
         "default": 1
      },
      "parameters": {
         "$id": "#/properties/parameters",
         "type": "array",
         "title": "Model Parameters",
         "description": "The parameters exposed for the model",
         "items": {
            "$ref": "#/definitions/parameter"
         }
      },
      "outputs": {
         "$id": "#/properties/outputs",
         "type": "array",
         "title": "Model Outputs",
         "description": "An array of model outputs",
         "items": {
            "type": "array",
            "items": {
               "$ref": "#/definitions/output"
            }
         }
      },
      "tags": {
         "$id": "#/properties/tags",
         "type": "array",
         "title": "Model Tags",
         "description": "The tags associated with the model.",
         "items": {
            "type": "string",
            "examples": [
               "Agriculture"
            ]
         }
      },
      "geography": {
         "$id": "#/properties/geography",
         "description": "Information about the geography covered by the model",
         "title": "Geography",
         "$ref": "#/definitions/geography"
      }
   },
   "additionalProperties": true,
   "definitions": {
      "parameter": {
         "$id": "#/definitions/parameter",
         "type": "object",
         "required": [
            "id",
            "name",
            "display_name",
            "description",
            "type",
            "data_type",
            "default"
         ],
         "properties": {
            "id": {
               "$id": "#/definitions/parameter/id",
               "type": "string",
               "title": "Parameter ID",
               "description": "The ID of the parameter",
               "default": "",
               "examples": [
                  "123e4567-e89b-12d3-a456-426614174000"
               ]
            },
            "name": {
               "$id": "#/definitions/parameter/name",
               "type": "string",
               "title": "Parameter Name",
               "description": "The name of the parameter",
               "default": "",
               "examples": [
                  "management_practice"
               ]
            },
            "display_name": {
               "$id": "#/definitions/parameter/display_name",
               "type": "string",
               "title": "Parameter Display Name",
               "description": "The user visible name of the parameter",
               "default": "",
               "examples": [
                  "Management Practice"
               ]
            },
            "description": {
               "$id": "#/definitions/parameter/description",
               "type": "string",
               "title": "Parameter Description",
               "description": "The description of the parameter",
               "default": "",
               "examples": [
                  "The management practice to model. rf_highN corresponds to a high nitrogen management  practice. irrig corresponds to a high nitrogen, irrigated management practice. rf_0N  corresponds to a subsistence management practice. rf_lowN corresponds to a low nitrogen  managemet practice."
               ]
            },
            "type": {
               "$id": "#/definitions/parameter/type",
               "type": "string",
               "title": "Parameter Type",
               "description": "The type of parameter",
               "enum": [
                  "int",
                  "float",
                  "str",
                  "datetime",
                  "date",
                  "time",
                  "longlat",
                  "binary",
                  "boolean",
                  "datacube"
               ],
               "examples": [
                  "str"
               ]
            },
            "unit": {
               "$id": "#/definitions/parameter/unit",
               "type": "string",
               "title": "Unit",
               "description": "The unit of the parameter value",
               "default": "",
               "examples": [
                  "degC"
               ]
            },
            "unit_description": {
               "$id": "#/definitions/parameter/unit_description",
               "type": "string",
               "title": "Unit Description",
               "description": "A short description of the unit",
               "default": "",
               "examples": [
                  "degrees Celcius"
               ]
            },
            "concepts": {
               "$id": "#/definitions/parameter/concepts",
               "type": "array",
               "title": "Concept Matches",
               "description": "A list of concepts matched to this varible",
               "items": {
                  "$ref": "#/definitions/concept"
               }
            },
            "is_drilldown": {
               "$id": "#/definitions/parameter/is_drilldown",
               "type": "boolean",
               "title": "Is Drilldown?",
               "description": "Does this variable represent a drilldown",
               "default": "",
               "examples": [
                  true
               ]
            },
            "additional_options": {
               "$id": "#/definitions/parameter/additional_options",
               "type": "object",
               "title": "Additional Options",
               "description": "Model specific extras",
               "additionalProperties": true
            },
            "depends_on": {
               "$id": "#/definitions/parameter/depends_on",
               "type": "object",
               "title": "Parameter Dependencies",
               "description": "Specifies dependencies on other parameters",
               "additionalProperties": true
            },
            "data_type": {
               "$id": "#/definitions/parameter/data_type",
               "default": "",
               "title": "Data Value Type",
               "description": "Describes whether the data values will be categorical, ordered, or numerical",
               "enum": [
                  "nominal",
                  "ordinal",
                  "numerical"
               ]
            },
            "default": {
               "$id": "#/definitions/parameter/default",
               "type": "string",
               "title": "Default Parameter Value",
               "description": "The default value of the parameter",
               "examples": [
                  "irrig"
               ]
            },
            "tags": {
               "$id": "#/definitions/parameter/tags",
               "type": "array",
               "title": "Parameter Tags",
               "description": "An array of tags associated with the parameter",
               "examples": [
                  [
                     "agriculture",
                     "fertilizer"
                  ]
               ],
               "items": {
                  "$id": "#/definitions/parameter/tags/items",
                  "type": "string"
               }
            }
         },
         "additionalProperties": true,
         "allOf": [
            {
               "if": {
                  "properties": {
                     "type": {
                        "const": "str"
                     }
                  }
               },
               "then": {
                  "properties": {
                     "choices": {
                        "$id": "#/definitions/parameter/choices",
                        "type": "array",
                        "title": "Parameter Choices",
                        "description": "If the parameter is a string type, then enumerate the choices for that parameter",
                        "examples": [
                           [
                              "irrig",
                              "rf_highN"
                           ]
                        ]
                     }
                  }
               }
            },
            {
               "if": {
                  "properties": {
                     "type": {
                        "enum": [
                           "int",
                           "float",
                           "datetime",
                           "date",
                           "time"
                        ]
                     }
                  }
               },
               "then": {
                  "properties": {
                     "min": {
                        "$id": "#/definitions/parameter/min",
                        "type": "number",
                        "title": "Parameter Min",
                        "description": "Inclusive min of parameter values",
                        "examples": [
                           5
                        ]
                     },
                     "max": {
                        "$id": "#/definitions/parameter/max",
                        "type": "number",
                        "title": "Parameter Max",
                        "description": "Inclusive max of parameter values",
                        "examples": [
                           10
                        ]
                     }
                  }
               }
            },
            {
               "if": {
                  "properties": {
                     "type": {
                        "const": "longlat"
                     }
                  }
               },
               "then": {
                  "properties": {
                     "boundary": {
                        "$id": "#/definitions/parameter/boundary",
                        "type": "array",
                        "title": "Parameter Geographic Boundary",
                        "description": "LongLat points that bound the geographic area",
                        "examples": [
                           [
                              [
                                 -34,
                                 26
                              ],
                              [
                                 -35,
                                 25
                              ],
                              [
                                 12,
                                 15
                              ],
                              [
                                 13,
                                 14
                              ]
                           ]
                        ]
                     }
                  }
               }
            }
         ]
      },
      "output": {
         "$id": "#/definitions/output",
         "type": "object",
         "required": [
            "id",
            "name",
            "display_name",
            "description",
            "type"
         ],
         "properties": {
            "id": {
               "$id": "#/definitions/output/id",
               "type": "string",
               "title": "Parameter ID",
               "description": "The ID of the parameter",
               "default": "",
               "examples": [
                  "123e4567-e89b-12d3-a456-426614174000"
               ]
            },
            "name": {
               "$id": "#/definitions/output/name",
               "type": "string",
               "title": "Parameter Name",
               "description": "The name of the parameter",
               "default": "",
               "examples": [
                  "management_practice"
               ]
            },
            "display_name": {
               "$id": "#/definitions/output/display_name",
               "type": "string",
               "title": "Parameter Display Name",
               "description": "The user visible name of the parameter",
               "default": "",
               "examples": [
                  "Management Practice"
               ]
            },
            "description": {
               "$id": "#/definitions/output/description",
               "type": "string",
               "title": "Parameter Description",
               "description": "The description of the parameter",
               "default": "",
               "examples": [
                  "The management practice to model. rf_highN corresponds to a high nitrogen management  practice. irrig corresponds to a high nitrogen, irrigated management practice. rf_0N  corresponds to a subsistence management practice. rf_lowN corresponds to a low nitrogen  managemet practice."
               ]
            },
            "type": {
               "$id": "#/definitions/output/type",
               "type": "string",
               "title": "Parameter Type",
               "description": "The type of parameter",
               "enum": [
                  "int",
                  "float",
                  "str",
                  "datetime",
                  "date",
                  "time",
                  "longlat",
                  "binary",
                  "boolean",
                  "datacube"
               ],
               "examples": [
                  "str"
               ]
            },
            "unit": {
               "$id": "#/definitions/output/unit",
               "type": "string",
               "title": "Unit",
               "description": "The unit of the parameter value",
               "default": "",
               "examples": [
                  "degC"
               ]
            },
            "unit_description": {
               "$id": "#/definitions/output/unit_description",
               "type": "string",
               "title": "Unit Description",
               "description": "A short description of the unit",
               "default": "",
               "examples": [
                  "degrees Celcius"
               ]
            },
            "concepts": {
               "$id": "#/definitions/output/concepts",
               "type": "array",
               "title": "Concept Matches",
               "description": "A list of concepts matched to this varible",
               "items": {
                  "$ref": "#/definitions/concept"
               }
            },
            "additional_options": {
               "$id": "#/definitions/output/additional_options",
               "type": "object",
               "title": "Additional Options",
               "description": "Model specific extras",
               "additionalProperties": true
            },
            "tags": {
               "$id": "#/definitions/output/tags",
               "type": "array",
               "title": "Parameter Tags",
               "description": "An array of tags associated with the parameter",
               "examples": [
                  [
                     "agriculture",
                     "fertilizer"
                  ]
               ],
               "items": {
                  "$id": "#/definitions/output/tags/items",
                  "type": "string"
               }
            },
            "data_resolution": {
               "$id": "#/definitions/output/data_resolution",
               "type": "object",
               "title": "Data Resolution",
               "description": "Spatial and temporal resolution of the data",
               "$ref": "#/definitions/output/definitions/resolution"
            }
         },
         "additionalProperties": true,
         "allOf": [
            {
               "if": {
                  "properties": {
                     "type": {
                        "const": "str"
                     }
                  }
               },
               "then": {
                  "properties": {
                     "choices": {
                        "$id": "#/definitions/output/choices",
                        "type": "array",
                        "title": "Parameter Choices",
                        "description": "If the parameter is a string type, then enumerate the choices for that parameter",
                        "examples": [
                           [
                                 "irrig",
                                 "rf_highN"
                           ]
                        ]
                     }
                  }
               }
            },
            {
               "if": {
                  "properties": {
                     "type": {
                        "enum": [
                           "int",
                           "float",
                           "datetime",
                           "date",
                           "time"
                        ]
                     }
                  }
               },
               "then": {
                  "properties": {
                     "min": {
                        "$id": "#/definitions/output/min",
                        "type": "number",
                        "title": "Parameter Min",
                        "description": "Inclusive min of parameter values",
                        "examples": [
                           5
                        ]
                     },
                     "max": {
                        "$id": "#/definitions/output/max",
                        "type": "number",
                        "title": "Parameter Max",
                        "description": "Inclusive max of parameter values",
                        "examples": [
                           10
                        ]
                     }
                  }
               }
            },
            {
               "if": {
                  "properties": {
                     "type": {
                        "const": "longlat"
                     }
                  }
               },
               "then": {
                  "properties": {
                     "boundary": {
                        "$id": "#/definitions/output/boundary",
                        "type": "array",
                        "title": "Parameter Geographic Boundary",
                        "description": "LongLat points that bound the geographic area",
                        "examples": [
                           [
                              [
                                 -34,
                                 26
                              ],
                              [
                                 -35,
                                 25
                              ],
                              [
                                 12,
                                 15
                              ],
                              [
                                 13,
                                 14
                              ]
                           ]
                        ]
                     }
                  }
               }
            }
         ],
         "definitions": {
            "resolution": {
               "$id": "#/definitions/output/definitions/resolution",
               "type": "object",
               "properties": {
                  "temporal_resolution": {
                     "$id": "#/definitions/output/definitions/resolution/temporal_resolution",
                     "default": "",
                     "title": "Temporal Resolution",
                     "description": "Temporal resolution of the output",
                     "enum": [
                        "annual",
                        "monthly",
                        "dcad",
                        "weekly",
                        "daily",
                        "other"
                     ]
                  },
                  "spatial_resolution": {
                     "$id": "#/definitions/output/definitions/resolution/spatial_resolution",
                     "type": "array",
                     "title": "Spatial Resolution",
                     "description": "Spatial resolution of the output (in meters)",
                     "default": "",
                     "minItems": 2,
                     "maxItems": 2,
                     "items": {
                        "type": "number"
                     },
                     "examples": [
                        [
                           20,
                           20
                        ]
                     ]
                  }
               }
            }
         }
      },
      "maintainer": {
         "$id": "#/definitions/maintainer",
         "type": "object",
         "required": [
            "name",
            "email"
         ],
         "properties": {
            "name": {
               "$id": "#/definitions/maintainer/properties/name",
               "default": "",
               "description": "The full name of the model maintainer",
               "examples": [
                  "Cheryl Porter"
               ],
               "title": "Model Maintainer Name",
               "type": "string"
            },
            "email": {
               "$id": "#/definitions/maintainer/properties/email",
               "default": "",
               "description": "Email address of the model maintainer",
               "examples": [
                  "cporter@ufl.edu"
               ],
               "title": "Model Maintainer Email Address",
               "type": "string"
            },
            "organization": {
               "$id": "#/definitions/maintainer/properties/organization",
               "default": "",
               "description": "Maintainer Organization",
               "examples": [
                  "University of Florida"
               ],
               "title": "Model Maintainer Organization",
               "type": "string"
            },
            "website": {
               "$id": "#/definitions/maintainer/properties/website",
               "default": "",
               "description": "Model maintainer website",
               "examples": [
                  "http://www.ufl.edu/"
               ],
               "title": "Model Maintainer Website",
               "type": "string"
            }
         },
         "additionalProperties": true
      },
      "geography": {
         "$id": "#/definitions/geography",
         "type": "object",
         "properties": {
            "country": {
               "$id": "#/definitions/geography/properties/country",
               "type": "array",
               "title": "Countries",
               "description": "List of countries covered by the model",
               "examples": [
                  [
                     "Ethiopia",
                     "South Sudan"
                  ]
               ]
            },
            "admin1": {
               "$id": "#/definitions/geography/properties/admin1",
               "type": "array",
               "title": "Admin Level 1",
               "description": "List of admin level 1 regions covered by the model",
               "examples": [
                  []
               ]
            },
            "admin2": {
               "$id": "#/definitions/geography/properties/admin2",
               "type": "array",
               "title": "Admin Level 2",
               "description": "List of admin level 2 regions covered by the model",
               "examples": [
                  []
               ]
            },
            "admin3": {
               "$id": "#/definitions/geography/properties/admin3",
               "type": "array",
               "title": "Admin Level 3",
               "description": "List of admin level 3 regions covered by the model",
               "examples": [
                  []
               ]
            }
         },
         "additionalProperties": true
      },
      "concept": {
         "$id": "#/definitions/concept",
         "type": "object",
         "properties": {
            "name": {
               "$id": "#/definitions/concept/name",
               "type": "string",
               "title": "Concept Name",
               "description": "The name of the concept in the ontology",
               "default": "",
               "examples": [
                  "wm/concept/causal_factor/food_security/food_utilization"
               ]
            },
            "score": {
               "$id": "#/definitions/concept/score",
               "type": "number",
               "title": "Match Score",
               "description": "A score between 0 and 1 representing the strength of the match",
               "default": "",
               "examples": [
                  0.785829484462738
               ]
            }
         }
      }
   }
}