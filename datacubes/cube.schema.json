{
    "$id": "https://github.com/uncharted-causemos/docs/blob/model-schemas/datacubes/cube.schema.json",
    "$schema": "http://json-schema.org/draft-07/schema",
    "description": "World Modelers Cube Metadata Schema",
    "required": [
        "id",
        "name",
        "description",
        "job_id",
        "model_id",
        "data_paths",
        "parameters",
        "tags"
    ],
    "title": "Model Metadata Schema",
    "type": "object",
    "properties": {
        "id": {
            "$id": "#/properties/id",
            "description": "A unique model id",
            "examples": [
                "123e4567-e89b-12d3-a456-426614174000"
            ],
            "title": "Model ID",
            "type": "string"
        },
        "name": {
            "$id": "#/properties/name",
            "title": "Model Name",
            "description": "The model name",
            "type": "string",
            "examples": [
                "DSSAT"
            ]
        },
        "description": {
            "$id": "#/properties/description",
            "title": "Model Description",
            "description": "The description of the model.",
            "type": "string",
            "examples": [
                "The Decision Support System for Agrotechnology Transfer (DSSAT) comprises dynamic crop growth simulation model for over 40 crops. The model simulates growth development; and yield as a function of the soil-plant-atmosphere dynamics."
            ]
        },
        "created": {
            "$id": "#/properties/created",
            "title": "Model Registration Time",
            "description": "When the model was registered",
            "type": "string",
            "examples": [
                "1970-01-01T00:00:00Z"
            ]
        },
        "job_id": {
            "$id": "#/properties/job_id",
            "title": "Job ID",
            "description": "SuperMaaS Job ID that executed this run",
            "type": "string",
            "examples": [
                "123e4567-e89b-12d3-a456-426614174000"
            ]
        },
        "model_id": {
            "$id": "#/properties/model_id",
            "title": "Model ID",
            "description": "The ID of the model that this run belongs to",
            "type": "string",
            "$ref": "./model.schema.json#/properties/id",
            "examples": [
                "123e4567-e89b-12d3-a456-426614174000"
            ]
        },
        "data_paths": {
            "$id": "#/properties/data_paths",
            "title": "Data URL Paths",
            "description": "URL paths to output datacubes",
            "type": "array",
            "items": {
                "type": "string"
            },
            "examples": [
                [
                    "runs/<run-id>/<cube-id-1>",
                    "runs/<run-id>/<cube-id-2>"
                ]
            ]
        },
        "pre_gen_output_paths": {
            "$id": "#/properties/pre_gen_output_paths",
            "title": "Pre-generated output URL Paths",
            "description": "URL paths to pre-generated output",
            "type": "array",
            "items": {
                "type": "string"
            },
            "examples": [
                [
                    "runs/<run-id>/<cube-id-1>/pre-gen"
                ]
            ]
        },
        "default_run": {
            "$id": "#/properties/default_run",
            "title": "Default Run?",
            "description": "Is this the default run of the model",
            "type": "boolean",
            "default": false
        },
        "parameters": {
            "$id": "#/properties/parameters",
            "title": "Model Parameters",
            "description": "The parameters exposed for the model",
            "type": "array",
            "items": {
                "$ref": "#/definitions/parameter"
            }
        },
        "periods": {
            "$id": "#/properties/periods",
            "title": "Cube time periods",
            "description": "Data ranges covered by the cube",
            "type": "array",
            "items": {
                "$ref": "#/definitions/period"
            }
        },
        "tags": {
            "$id": "#/properties/tags",
            "title": "Model Tags",
            "description": "The tags associated with the model.",
            "type": "array",
            "items": {
                "type": "string"
            },
            "examples": [
                [
                    "Agriculture"
                ]
            ]
        },
        "geography": {
            "$id": "#/properties/geography",
            "title": "Geography",
            "description": "Information about the geography covered by the cube",
            "$ref": "#/definitions/geography"
        }
    },
    "additionalProperties": true,
    "definitions": {
        "parameter": {
            "$id": "#/definitions/parameter",
            "type": "object",
            "properties": {
                "id": {
                    "$id": "#/definitions/parameter/id",
                    "title": "Parameter ID",
                    "description": "The ID of the parameter",
                    "type": "string",
                    "examples": [
                        "123e4567-e89b-12d3-a456-426614174000"
                    ]
                },
                "value": {
                    "$id": "#/definitions/parameter/default",
                    "title": "Parameter Value",
                    "description": "Set value of parameter during run",
                    "type": "string",
                    "examples": [
                        "irrig"
                    ]
                }
            },
            "additionalProperties": true
        },
        "period": {
            "$id": "#/definitions/period",
            "title": "Date Range",
            "description": "Date range and resolution",
            "type": "object",
            "properties": {
                "gte": {
                    "$id": "#/definition/output/gte",
                    "title": "Start Time",
                    "description": "Start Time (inclusive)",
                    "type": "string",
                    "examples": [
                        "1970-01-01T00:00:00Z"
                    ]
                },
                "lte": {
                    "$id": "#/definition/output/lte",
                    "title": "End Time",
                    "description": "End Time (inclusive)",
                    "type": "string",
                    "examples": [
                        "2020-01-01T00:00:00Z"
                    ]
                },
                "resolution": {
                    "$id": "#/definition/output/resolution",
                    "title": "Temporal Resolution",
                    "description": "Temporal resolution",
                    "enum": [
                        "annual",
                        "monthly",
                        "dekad",
                        "weekly",
                        "daily",
                        "other"
                    ]
                }
            },
            "additionalProperties": true
        },
        "geography": {
            "$id": "#/definitions/geography",
            "type": "object",
            "required": [],
            "properties": {
                "country": {
                    "$id": "#/definitions/geography/properties/country",
                    "title": "Countries",
                    "description": "List of countries covered by the model",
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "examples": [
                        [
                            "Ethiopia",
                            "South Sudan"
                        ]
                    ]
                },
                "admin1": {
                    "$id": "#/definitions/geography/properties/admin1",
                    "title": "Admin Level 1",
                    "description": "List of admin level 1 regions covered by the model",
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "examples": [
                        [
                            "Oromia",
                            "Sidama",
                            "Amhara"
                        ]
                    ]
                },
                "admin2": {
                    "$id": "#/definitions/geography/properties/admin2",
                    "title": "Admin Level 2",
                    "description": "List of admin level 2 regions covered by the model",
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "examples": [
                        [
                            "West Gojjam",
                            "East Gojjam",
                            "Agew Awi",
                            "Arsi",
                            "Bale",
                            "Borana"
                        ]
                    ]
                },
                "admin3": {
                    "$id": "#/definitions/geography/properties/admin3",
                    "title": "Admin Level 3",
                    "description": "List of admin level 3 regions covered by the model",
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "examples": [
                        [
                            "Aminyaa",
                            "Askoo",
                            "Coole",
                            "Galaanaa",
                            "Qarsaa",
                            "Qarcaa"
                        ]
                    ]
                }
            },
            "additionalProperties": true
        }
    }
}